<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø³ÙˆÙ‚ Ø§Ù„Ù…ÙˆØ¯ÙŠØ´ - Ù…Ù†ØµØ© Ø§Ù„ØªØµØ§Ù…ÙŠÙ…</title>
<style>
body { font-family: Arial,sans-serif; margin:0; padding:0; direction: rtl; transition:0.3s; }
body.light { background:#fff; color:#000; }
body.dark { background:#121212; color:#fff; }

/* NAVBAR */
.nav { 
  background:#000; 
  color:#FFD700; 
  padding:8px 20px; 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
}
.nav-left { display:flex; align-items:center; gap:10px; }
.nav-right { display:flex; align-items:center; }

.nav button { 
  background:#FFD700; 
  border:none; 
  padding:6px 10px; 
  border-radius:6px; 
  cursor:pointer; 
  font-weight:bold; 
  margin-left:5px; 
  font-size:18px; 
}
.nav button:hover { background:#FFC107; }
.nav button[title] { font-size:22px; }

/* SECTIONS */
section { display:none; padding:30px; }
section.active { display:block; }

.form-box { max-width:400px; background:#f2f2f2; padding:20px; border-radius:10px; margin:auto; }
.form-box input, .form-box select, .form-box input[type=file] { width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #999; }
.form-box button { width:100%; padding:10px; background:#000; color:#FFD700; border:none; border-radius:8px; cursor:pointer; font-size:16px; }

body.dark .form-box { background:#1E1E1E; }
body.dark .form-box input, body.dark .form-box select { background:#333; color:#fff; border-color:#666; }
body.dark .form-box button { background:#FFD700; color:#000; }

.designs-container { display:flex; overflow-x:auto; gap:20px; padding-bottom:10px; margin-top:20px; }
.design-card { min-width:200px; background:#f2f2f2; border-radius:10px; padding:10px; text-align:center; flex-shrink:0; }
.design-card button { margin-top:10px; padding:8px 12px; border:none; border-radius:5px; cursor:pointer; background:#000; color:#FFD700; font-weight:bold; }
body.dark .design-card { background:#1E1E1E; }
body.dark .design-card button { background:#FFD700; color:#000; }

.user-info { background:#e0e0e0; padding:15px; border-radius:10px; max-width:400px; margin:auto; margin-bottom:20px; }
body.dark .user-info { background:#333; }

.purchase-list { max-width:500px; margin:auto; background:#f2f2f2; padding:15px; border-radius:10px; }
body.dark .purchase-list { background:#333; color:#fff; }
</style>
</head>
<body class="light">

<!-- NAVBAR -->
<div class="nav">
  <div class="nav-left">
    <div style="font-size:20px; font-weight:bold;">Ø³ÙˆÙ‚ Ø§Ù„Ù…ÙˆØ¯ÙŠØ´</div>
    <button title="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" onclick="showSection('home')">ğŸ </button>
    <button title="Ø§Ù„Ù…ØµÙ…Ù…" onclick="showSection('designerCheck')">ğŸ‘¤</button>
    <button title="Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª" onclick="showSection('purchases')">ğŸ›’</button>
  </div>
  <div class="nav-right">
    <button title="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ" onclick="toggleTheme()">ğŸŒ™</button>
  </div>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<section id="home" class="active">
  <h2>Ø§Ù„ØªØµØ§Ù…ÙŠÙ… Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
  <div class="designs-container" id="mainDesigns"></div>
</section>

<!-- Ø§Ù„ØªØ­Ù‚Ù‚/Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØµÙ…Ù… -->
<section id="designerCheck">
  <h2>Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ØµÙ…Ù…</h2>
  <div class="form-box">
    <button onclick="gotoRegister()">ÙØªØ­ Ø­Ø³Ø§Ø¨</button>
    <button onclick="gotoLogin()">Ø¯Ø®ÙˆÙ„</button>
  </div>
</section>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ØµÙ…Ù… -->
<section id="designerRegister">
  <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ØµÙ…Ù…</h2>
  <div class="form-box">
    <input id="regName" placeholder="Ø§Ù„Ø§Ø³Ù…">
    <input id="regLast" placeholder="Ø§Ù„Ù„Ù‚Ø¨">
    <input id="regPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
    <input id="regEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input id="regPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button onclick="registerDesigner()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
  </div>
</section>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<section id="designerLogin">
  <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØµÙ…Ù…</h2>
  <div class="form-box">
    <input id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input id="loginPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button onclick="loginDesigner()">Ø¯Ø®ÙˆÙ„</button>
  </div>
</section>

<!-- ØµÙØ­Ø© Ø§Ù„Ù…ØµÙ…Ù… -->
<section id="designer">
  <h2>Ù…Ù„Ù Ø§Ù„Ù…ØµÙ…Ù…</h2>
  <div class="user-info" id="userInfo"></div>
  <div class="user-info">
    <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø±Ø§Ø©:</strong> <span id="totalSales">0</span>
  </div>

  <h3>Ø¥Ø¶Ø§ÙØ© ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯</h3>
  <div class="form-box">
    <input id="designName" placeholder="Ø§Ø³Ù… Ø§Ù„ØªØµÙ…ÙŠÙ…">
    <input id="designImage" type="file">
    <input id="designPrice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± ($)">
    <select id="currency">
      <option value="USD">USD</option>
      <option value="EUR">EUR</option>
      <option value="MAD">MAD</option>
    </select>
    <button onclick="addDesign()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ…ÙŠÙ…</button>
  </div>

  <h3>ØªØµØ§Ù…ÙŠÙ…Ùƒ:</h3>
  <div class="designs-container" id="designerDesigns"></div>
</section>

<!-- Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª -->
<section id="purchases">
  <h2>Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h2>
  <div class="purchase-list" id="purchaseList"></div>
</section>

<script>
let data = JSON.parse(localStorage.getItem("data")) || {
  designers: [], logged: null, designs: [], purchases:[]
};

function save(){ localStorage.setItem("data",JSON.stringify(data)); }

function showSection(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  refresh();
}

function gotoRegister(){ showSection("designerRegister"); }
function gotoLogin(){ showSection("designerLogin"); }

function registerDesigner(){
  let name=document.getElementById("regName").value;
  let last=document.getElementById("regLast").value;
  let phone=document.getElementById("regPhone").value;
  let email=document.getElementById("regEmail").value;
  let pass=document.getElementById("regPass").value;

  if(!email || !pass){ alert("Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø©"); return; }
  data.designers.push({name,last,phone,email,pass});
  save();
  alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨!");
  showSection("designerCheck");
}

function loginDesigner(){
  let email=document.getElementById("loginEmail").value;
  let pass=document.getElementById("loginPass").value;

  let d=data.designers.find(d=>d.email===email && d.pass===pass);
  if(!d){ alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦Ø©"); return; }

  data.logged=email;
  save();
  showSection("designer");
}

function addDesign(){
  let name=document.getElementById("designName").value;
  let image=document.getElementById("designImage").files[0] ? document.getElementById("designImage").files[0].name : "image.png";
  let price=document.getElementById("designPrice").value;
  let currency=document.getElementById("currency").value;

  data.designs.push({name,image,price,currency,buyers:0,owner:data.logged});
  save();
  refresh();
}

function buyDesign(name, price, currency){
  const sales = JSON.parse(localStorage.getItem("salesLog")||"[]");
  const date = new Date().toLocaleString();
  sales.push({design:name, price, currency, date});
  localStorage.setItem("salesLog", JSON.stringify(sales));

  const d = data.designs.find(x=>x.name===name);
  if(d){ d.buyers++; }
  data.logged && (data.designers.find(x=>x.email===data.logged).totalSales = (data.designers.find(x=>x.email===data.logged).totalSales||0)+1);

  save();
  refresh();
  alert(`ØªÙ… Ø´Ø±Ø§Ø¡ Ø§Ù„ØªØµÙ…ÙŠÙ…: ${name} Ù…Ù‚Ø§Ø¨Ù„ ${price} ${currency}`);
}

function refresh(){
  // Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  let home=document.getElementById("mainDesigns");
  home.innerHTML="";
  data.designs.forEach(d=>{
    home.innerHTML += `<div class="design-card">${d.name}<br>${d.price} ${d.currency}<br>Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø±Ø§Ø©: ${d.buyers}<br><button onclick="buyDesign('${d.name}','${d.price}','${d.currency}')">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button></div>`;
  });

  // ØµÙØ­Ø© Ø§Ù„Ù…ØµÙ…Ù…
  if(data.logged){
    let myD = data.designs.filter(x=>x.owner===data.logged);
    document.getElementById("designerDesigns").innerHTML="";
    let total = myD.reduce((a,b)=>a+Number(b.buyers),0);
    document.getElementById("totalSales").innerText = total;
    document.getElementById("userInfo").innerHTML=`<strong>Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> ${data.logged}`;

    myD.forEach(d=>{
      document.getElementById("designerDesigns").innerHTML += `<div class="design-card">${d.name}<br>${d.price} ${d.currency}<br>Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø±Ø§Ø©: ${d.buyers}<br></div>`;
    });
  }

  // Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª
  let pur=document.getElementById("purchaseList");
  pur.innerHTML="";
  const sales = JSON.parse(localStorage.getItem("salesLog")||"[]");
  sales.forEach((s,i)=>{
    pur.innerHTML += `${i+1}. ${s.design} - ${s.price} ${s.currency} - ${s.date}<br>`;
  });
}

// Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
function toggleTheme(){ document.body.classList.toggle("dark"); document.body.classList.toggle("light"); }

refresh();
</script>
</body>
</html>
