<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>MALL APP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --black:#0b0b0b;
  --yellow:#f5c400;
  --gray:#f3f3f3;
}
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:var(--gray);padding-bottom:70px}
header{background:var(--black);color:#fff;padding:14px;text-align:center;font-weight:bold}
.page{display:none;padding:15px}
.page.active{display:block}
.card{background:#fff;padding:15px;border-radius:14px;margin-bottom:15px;box-shadow:0 4px 10px rgba(0,0,0,.08)}
input,button{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid #ccc}
button{border:none;font-weight:bold;cursor:pointer}
.primary{background:var(--yellow)}
.outline{background:#fff;border:2px solid var(--yellow)}
.bottom-nav{
  position:fixed;bottom:0;left:0;right:0;
  background:#fff;border-top:1px solid #ddd;
  display:flex;justify-content:space-around;padding:8px 0
}
.bottom-nav button{background:none;border:none;font-size:12px}
.bottom-nav button.active{color:var(--yellow);font-weight:bold}
</style>
</head>

<body>

<header>MALL</header>

<!-- HOME -->
<div id="home" class="page active">
  <div class="card">
    <input placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬">
  </div>
</div>

<!-- STORE -->
<div id="stores" class="page">
  <h3>ğŸª Ø§Ù„Ù…ØªØ¬Ø±</h3>

  <div class="card">
    <h4>ğŸ§¥ Ù…Ù„Ø§Ø¨Ø³</h4>
    <button class="primary" onclick="openStore('Ù…Ù„Ø§Ø¨Ø³')">Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
  </div>

  <div class="card">
    <h4>ğŸ’» Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</h4>
    <button class="primary" onclick="openStore('Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª')">Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
  </div>
</div>

<!-- PRODUCTS -->
<div id="products" class="page">
  <h3 id="storeName"></h3>

  <div id="addProductBox" class="card" style="display:none">
    <h4>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h4>
    <input id="p_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
    <input id="p_price" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <button class="primary" onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>
  </div>

  <div id="productList"></div>
</div>

<!-- CART -->
<div id="cart" class="page">
  <h3>ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h3>
  <div id="cartItems"></div>
  <h4 id="total"></h4>
</div>

<!-- NAV -->
<div class="bottom-nav">
  <button class="active" onclick="showPage('home',this)">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button onclick="showPage('stores',this)">ğŸª<br>Ø§Ù„Ù…ØªØ¬Ø±</button>
  <button onclick="showPage('cart',this)">ğŸ›’<br>Ø§Ù„Ø³Ù„Ø©</button>
</div>

<script>
/* NAV */
function showPage(id,btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.bottom-nav button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

/* STORE + PRODUCTS */
let currentCategory="";
let products = JSON.parse(localStorage.getItem("products")) || [];
let cart = JSON.parse(localStorage.getItem("cart")) || [];

function openStore(cat){
  currentCategory = cat;
  storeName.innerText = "Ù…Ù†ØªØ¬Ø§Øª " + cat;
  showPage('products', document.querySelector(".bottom-nav button:nth-child(2)"));

  const store = JSON.parse(localStorage.getItem("store"));
  addProductBox.style.display = store ? "block" : "none";

  renderProducts();
}

function addProduct(){
  if(!p_name.value || !p_price.value) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„");

  products.push({
    name:p_name.value,
    price:Number(p_price.value),
    category:currentCategory
  });

  localStorage.setItem("products", JSON.stringify(products));
  p_name.value=""; p_price.value="";
  renderProducts();
}

function renderProducts(){
  productList.innerHTML="";
  products.filter(p=>p.category===currentCategory)
  .forEach((p,i)=>{
    productList.innerHTML+=`
      <div class="card">
        <b>${p.name}</b><br>
        Ø§Ù„Ø³Ø¹Ø±: ${p.price} Ø¯Ø±Ù‡Ù…
        <button class="primary" onclick="addToCart('${p.name}',${p.price})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
      </div>`;
  });
}

/* CART */
function addToCart(name,price){
  cart.push({name,price});
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
  alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©");
}

function renderCart(){
  cartItems.innerHTML="";
  let sum=0;
  cart.forEach((c,i)=>{
    sum+=c.price;
    cartItems.innerHTML+=`
      <div class="card">
        ${c.name} - ${c.price} Ø¯Ø±Ù‡Ù…
        <button onclick="removeItem(${i})">âŒ</button>
      </div>`;
  });
  total.innerText="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: "+sum+" Ø¯Ø±Ù‡Ù…";
}

function removeItem(i){
  cart.splice(i,1);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

renderCart();
</script>

</body>
</html>
